var data = {lines:[
{"lineNum":"    1","line":"#!/bin/bash"},
{"lineNum":"    2","line":""},
{"lineNum":"    3","line":"# This program contains parts of narwhal\'s \"sea\" program,"},
{"lineNum":"    4","line":"# as well as bits borrowed from Tim Caswell\'s \"nvm\""},
{"lineNum":"    5","line":""},
{"lineNum":"    6","line":"# nave install <version>"},
{"lineNum":"    7","line":"# Fetch the version of node and install it in nave\'s folder."},
{"lineNum":"    8","line":""},
{"lineNum":"    9","line":"# nave use <version>"},
{"lineNum":"   10","line":"# Install the <version> if it isn\'t already, and then start"},
{"lineNum":"   11","line":"# a subshell with that version\'s folder at the start of the"},
{"lineNum":"   12","line":"# $PATH"},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"# nave use <version> program.js"},
{"lineNum":"   15","line":"# Like \"nave use\", but have the subshell start the program.js"},
{"lineNum":"   16","line":"# immediately."},
{"lineNum":"   17","line":""},
{"lineNum":"   18","line":"# When told to use a version:"},
{"lineNum":"   19","line":"# Ensure that the version exists, install it, and"},
{"lineNum":"   20","line":"# then add its prefix to the PATH, and start a subshell."},
{"lineNum":"   21","line":""},
{"lineNum":"   22","line":"if [ \"$NAVE_DEBUG\" != \"\" ]; then","class":"lineCov","hits":"1","order":"58",},
{"lineNum":"   23","line":"  set -x","class":"lineCov","hits":"1","order":"323",},
{"lineNum":"   24","line":"fi"},
{"lineNum":"   25","line":""},
{"lineNum":"   26","line":"if [ -z \"$BASH\" ]; then","class":"lineCov","hits":"1","order":"64",},
{"lineNum":"   27","line":"  cat >&2 <<MSG","class":"lineCov","hits":"1","order":"375",},
{"lineNum":"   28","line":"Nave is a bash program, and must be run with bash."},
{"lineNum":"   29","line":"MSG"},
{"lineNum":"   30","line":"  exit 1","class":"lineCov","hits":"1","order":"376",},
{"lineNum":"   31","line":"fi"},
{"lineNum":"   32","line":""},
{"lineNum":"   33","line":"# Use fancy pants globs"},
{"lineNum":"   34","line":"shopt -s extglob","class":"lineCov","hits":"1","order":"78",},
{"lineNum":"   35","line":""},
{"lineNum":"   36","line":"# Try to figure out the os and arch for binary fetching"},
{"lineNum":"   37","line":"osarch () {"},
{"lineNum":"   38","line":"  local uname=$(uname -a)","class":"lineCov","hits":"1","order":"81",},
{"lineNum":"   39","line":"  local os=","class":"lineCov","hits":"1","order":"65",},
{"lineNum":"   40","line":"  local arch=","class":"lineCov","hits":"1","order":"70",},
{"lineNum":"   41","line":"  case \"$uname\" in","class":"lineCov","hits":"1","order":"85",},
{"lineNum":"   42","line":"    Linux\\ *) os=linux ;;","class":"lineCov","hits":"1","order":"490",},
{"lineNum":"   43","line":"    Darwin\\ *) os=darwin ;;","class":"lineCov","hits":"1","order":"73",},
{"lineNum":"   44","line":"    SunOS\\ *) os=sunos ;;","class":"lineCov","hits":"1","order":"491",},
{"lineNum":"   45","line":"  esac"},
{"lineNum":"   46","line":"  case \"$uname\" in","class":"lineCov","hits":"1","order":"54",},
{"lineNum":"   47","line":"    *arm64*) arch=arm64 ;;","class":"lineCov","hits":"1","order":"488",},
{"lineNum":"   48","line":"    *x86_64*) arch=x64 ;;","class":"lineCov","hits":"1","order":"50",},
{"lineNum":"   49","line":"    *i[3456]86*) arch=x86 ;;","class":"lineCov","hits":"1","order":"487",},
{"lineNum":"   50","line":"    *raspberrypi*) arch=arm-pi ;;","class":"lineCov","hits":"1","order":"486",},
{"lineNum":"   51","line":"    *aarch64*) arch=arm64 ;;","class":"lineCov","hits":"1","order":"489",},
{"lineNum":"   52","line":"  esac"},
{"lineNum":"   53","line":"  # memoize"},
{"lineNum":"   54","line":"  if [ \"$os\" != \"\" ] && [ \"$arch\" != \"\" ]; then","class":"lineCov","hits":"1","order":"48",},
{"lineNum":"   55","line":"    eval \'osarch () { echo \"\'$os-$arch\'\"; };\'","class":"lineCov","hits":"1","order":"62",},
{"lineNum":"   56","line":"    echo \"$os-$arch\"","class":"lineCov","hits":"1","order":"66",},
{"lineNum":"   57","line":"  else"},
{"lineNum":"   58","line":"    eval \'osarch () { return 1; };\'","class":"lineCov","hits":"1","order":"212",},
{"lineNum":"   59","line":"    return 1","class":"lineCov","hits":"1","order":"213",},
{"lineNum":"   60","line":"  fi"},
{"lineNum":"   61","line":"}"},
{"lineNum":"   62","line":""},
{"lineNum":"   63","line":"tar=${TAR-tar}","class":"lineCov","hits":"1","order":"76",},
{"lineNum":"   64","line":""},
{"lineNum":"   65","line":"main () {"},
{"lineNum":"   66","line":"  get_nave_dir","class":"lineCov","hits":"1","order":"222",},
{"lineNum":"   67","line":"  write_rcfile","class":"lineCov","hits":"1","order":"228",},
{"lineNum":"   68","line":""},
{"lineNum":"   69","line":"  export NAVE_DIR","class":"lineCov","hits":"1","order":"225",},
{"lineNum":"   70","line":"  mkdirp \"$NAVE_SRC\"","class":"lineCov","hits":"1","order":"229",},
{"lineNum":"   71","line":"  mkdirp \"$NAVE_ROOT\"","class":"lineCov","hits":"1","order":"231",},
{"lineNum":"   72","line":""},
{"lineNum":"   73","line":"  local cmd=\"$1\"","class":"lineCov","hits":"1","order":"232",},
{"lineNum":"   74","line":"  shift","class":"lineCov","hits":"1","order":"233",},
{"lineNum":"   75","line":"  case $cmd in","class":"lineCov","hits":"1","order":"234",},
{"lineNum":"   76","line":"    ls-remote | ls-all)"},
{"lineNum":"   77","line":"      cmd=\"nave_${cmd/-/_}\"","class":"lineCov","hits":"1","order":"284",},
{"lineNum":"   78","line":"      ;;"},
{"lineNum":"   79","line":"    auto|cache|exit|install|fetch|use|clean|test|named|ls|uninstall|usemain|latest|stable|lts|has|installed|get)"},
{"lineNum":"   80","line":"      cmd=\"nave_$cmd\"","class":"lineCov","hits":"1","order":"235",},
{"lineNum":"   81","line":"      ;;"},
{"lineNum":"   82","line":"    * )"},
{"lineNum":"   83","line":"      cmd=\"nave_help\"","class":"lineCov","hits":"1","order":"288",},
{"lineNum":"   84","line":"      ;;"},
{"lineNum":"   85","line":"  esac"},
{"lineNum":"   86","line":"  # err \"nave_$cmd = [$cmd] @=[$@]\""},
{"lineNum":"   87","line":"  $cmd \"$@\"","class":"lineCov","hits":"1","order":"236",},
{"lineNum":"   88","line":"}"},
{"lineNum":"   89","line":""},
{"lineNum":"   90","line":"get_nave_dir () {"},
{"lineNum":"   91","line":"  NODEDIST=${NODEDIST:-https://nodejs.org/dist}","class":"lineCov","hits":"1","order":"97",},
{"lineNum":"   92","line":"  NAVE_CACHE_DUR=${NAVE_CACHE_DUR:-86400}","class":"lineCov","hits":"1","order":"98",},
{"lineNum":"   93","line":"  NAVEUA=\"nave/$(curl --version | head -n1)\"","class":"lineCov","hits":"1","order":"80",},
{"lineNum":"   94","line":""},
{"lineNum":"   95","line":"  if [ -z \"${NAVE_DIR+defined}\" ]; then","class":"lineCov","hits":"1","order":"99",},
{"lineNum":"   96","line":"    if [ -d \"$XDG_CONFIG_HOME\" ] && ! [ -d \"$HOME/.nave\" ]; then","class":"lineCov","hits":"1","order":"100",},
{"lineNum":"   97","line":"      NAVE_DIR=\"$XDG_CONFIG_HOME\"/nave","class":"lineCov","hits":"1","order":"82",},
{"lineNum":"   98","line":"    elif [ -d \"$HOME\" ]; then","class":"lineCov","hits":"1","order":"325",},
{"lineNum":"   99","line":"      NAVE_DIR=\"$HOME\"/.nave","class":"lineCov","hits":"1","order":"326",},
{"lineNum":"  100","line":"    else"},
{"lineNum":"  101","line":"      local prefix=${PREFIX:-/usr/local}","class":"lineCov","hits":"1","order":"328",},
{"lineNum":"  102","line":"      NAVE_DIR=$prefix/lib/nave","class":"lineCov","hits":"1","order":"327",},
{"lineNum":"  103","line":"    fi"},
{"lineNum":"  104","line":"  fi"},
{"lineNum":"  105","line":"  NAVE_SRC=\"$NAVE_DIR/src\"","class":"lineCov","hits":"1","order":"56",},
{"lineNum":"  106","line":"  NAVE_ROOT=\"$NAVE_DIR/installed\"","class":"lineCov","hits":"1","order":"53",},
{"lineNum":"  107","line":"}"},
{"lineNum":"  108","line":""},
{"lineNum":"  109","line":"nave_get () {"},
{"lineNum":"  110","line":"  case \"$1\" in","class":"lineCov","hits":"1","order":"363",},
{"lineNum":"  111","line":"    root) echo $NAVE_ROOT ;;","class":"lineCov","hits":"1","order":"366",},
{"lineNum":"  112","line":"    cache) echo $NAVE_DIR/cache ;;","class":"lineCov","hits":"1","order":"367",},
{"lineNum":"  113","line":"    dir) echo $NAVE_DIR  ;;","class":"lineCov","hits":"1","order":"362",},
{"lineNum":"  114","line":"    src) echo $NAVE_SRC  ;;","class":"lineCov","hits":"1","order":"364",},
{"lineNum":"  115","line":"    cache-dur) echo $NAVE_CACHE_DUR ;;","class":"lineCov","hits":"1","order":"365",},
{"lineNum":"  116","line":"    ua) echo $NAVEUA ;;","class":"lineCov","hits":"1","order":"368",},
{"lineNum":"  117","line":"    src-only) echo $NAVE_SRC_ONLY ;;","class":"lineCov","hits":"1","order":"361",},
{"lineNum":"  118","line":"    *)"},
{"lineNum":"  119","line":"      if [ \"$1\" != \"\" ]; then","class":"lineCov","hits":"1","order":"369",},
{"lineNum":"  120","line":"        err \"unknown setting: $1\"","class":"lineCov","hits":"1","order":"370",},
{"lineNum":"  121","line":"      fi"},
{"lineNum":"  122","line":"      cat <<USAGE","class":"lineCov","hits":"1","order":"360",},
{"lineNum":"  123","line":"Usage:"},
{"lineNum":"  124","line":"  nave get (root|cache|dir|src|cache-dur|ua|src-only)"},
{"lineNum":"  125","line":"USAGE"},
{"lineNum":"  126","line":";;"},
{"lineNum":"  127","line":"  esac"},
{"lineNum":"  128","line":"}"},
{"lineNum":"  129","line":""},
{"lineNum":"  130","line":"enquote_all () {"},
{"lineNum":"  131","line":"  local ARG ARGS","class":"lineCov","hits":"1","order":"241",},
{"lineNum":"  132","line":"  ARGS=()"},
{"lineNum":"  133","line":"  for ARG in \"$@\"; do","class":"lineCov","hits":"1","order":"240",},
{"lineNum":"  134","line":"    # start each arg with a \', then replace all \' with \'\"\'\"\', then end quote"},
{"lineNum":"  135","line":"    # so \"o\'brien\" becomes \'o\'\"\'\"\'brien\'"},
{"lineNum":"  136","line":"    # it\'s a bit line noisey, but it works reliably."},
{"lineNum":"  137","line":"    local newArg=\"$(sed \'s/\'\"\'\"\'/\'\"\'\"\'\"\'\"\'\"\'\"\'\"\'\"\'/g\' <<< \"$ARG\")\"","class":"lineCov","hits":"1","order":"239",},
{"lineNum":"  138","line":"    ARGS+=(\"\'$newArg\'\")","class":"lineCov","hits":"1","order":"238",},
{"lineNum":"  139","line":"  done"},
{"lineNum":"  140","line":"  echo \"${ARGS[@]}\"","class":"lineCov","hits":"1","order":"237",},
{"lineNum":"  141","line":"}"},
{"lineNum":"  142","line":""},
{"lineNum":"  143","line":"mkdirp () {"},
{"lineNum":"  144","line":"  local defaultMsg=\"couldn\'t create $1\"","class":"lineCov","hits":"1","order":"41",},
{"lineNum":"  145","line":"  msg=${2:-$defaultMsg}","class":"lineCov","hits":"1","order":"40",},
{"lineNum":"  146","line":"  mkdir -p -- \"$1\" || fail \"$msg\"","class":"lineCov","hits":"1","order":"39",},
{"lineNum":"  147","line":"}"},
{"lineNum":"  148","line":""},
{"lineNum":"  149","line":"rimraf () {"},
{"lineNum":"  150","line":"  rm -rf -- \"$1\" || fail \"Could not remove $1\"","class":"lineCov","hits":"1","order":"185",},
{"lineNum":"  151","line":"}"},
{"lineNum":"  152","line":""},
{"lineNum":"  153","line":"err () {"},
{"lineNum":"  154","line":"  echo \"$@\" >&2","class":"lineCov","hits":"1","order":"68",},
{"lineNum":"  155","line":"}"},
{"lineNum":"  156","line":""},
{"lineNum":"  157","line":"fail () {"},
{"lineNum":"  158","line":"  err \"$@\"","class":"lineCov","hits":"1","order":"243",},
{"lineNum":"  159","line":"  [ -z $_TESTING_NAVE_NO_EXIT ] && exit 1","class":"lineCov","hits":"1","order":"242",},
{"lineNum":"  160","line":"}"},
{"lineNum":"  161","line":""},
{"lineNum":"  162","line":"nave_fetch () {"},
{"lineNum":"  163","line":"  local version=$(ver \"$1\")","class":"lineCov","hits":"1","order":"172",},
{"lineNum":"  164","line":"  if nave_has \"$version\"; then","class":"lineCov","hits":"1","order":"171",},
{"lineNum":"  165","line":"    return 0","class":"lineCov","hits":"1","order":"191",},
{"lineNum":"  166","line":"  fi"},
{"lineNum":"  167","line":""},
{"lineNum":"  168","line":"  local src=\"$NAVE_SRC/$version\"","class":"lineCov","hits":"1","order":"192",},
{"lineNum":"  169","line":"  rimraf \"$src\"","class":"lineCov","hits":"1","order":"193",},
{"lineNum":"  170","line":"  mkdirp \"$src\"","class":"lineCov","hits":"1","order":"190",},
{"lineNum":"  171","line":""},
{"lineNum":"  172","line":"  local tarfile","class":"lineCov","hits":"1","order":"169",},
{"lineNum":"  173","line":"  tarfile=\"$(get \"v$version/node-v$version.tar.gz\" -#Lf)\"","class":"lineCov","hits":"1","order":"182",},
{"lineNum":"  174","line":"  if [ $? -eq 0 ]; then","class":"lineCov","hits":"1","order":"181",},
{"lineNum":"  175","line":"    cp \"$tarfile\" \"$src\".tgz","class":"lineCov","hits":"1","order":"180",},
{"lineNum":"  176","line":"    $tar xzf \"$src\".tgz -C \"$src\" --strip-components=1","class":"lineCov","hits":"1","order":"179",},
{"lineNum":"  177","line":"    if [ $? -eq 0 ]; then","class":"lineCov","hits":"1","order":"178",},
{"lineNum":"  178","line":"      err \"fetched $version\"","class":"lineCov","hits":"1","order":"184",},
{"lineNum":"  179","line":"      return 0","class":"lineCov","hits":"1","order":"168",},
{"lineNum":"  180","line":"    fi"},
{"lineNum":"  181","line":"  fi"},
{"lineNum":"  182","line":""},
{"lineNum":"  183","line":"  rm \"$src\".tgz","class":"lineCov","hits":"1","order":"354",},
{"lineNum":"  184","line":"  rimraf \"$src\"","class":"lineCov","hits":"1","order":"351",},
{"lineNum":"  185","line":"  err \"Couldn\'t fetch $version\"","class":"lineCov","hits":"1","order":"352",},
{"lineNum":"  186","line":"  return 1","class":"lineCov","hits":"1","order":"356",},
{"lineNum":"  187","line":"}"},
{"lineNum":"  188","line":""},
{"lineNum":"  189","line":"get_shasum () {"},
{"lineNum":"  190","line":"  local dir=$1","class":"lineCov","hits":"1","order":"75",},
{"lineNum":"  191","line":"  local base=$2","class":"lineCov","hits":"1","order":"37",},
{"lineNum":"  192","line":"  get_html \"$dir/SHASUMS256.txt\" | grep \"$base\" | awk \'{print $1}\'","class":"lineCov","hits":"1","order":"36",},
{"lineNum":"  193","line":"}"},
{"lineNum":"  194","line":""},
{"lineNum":"  195","line":"get_tgz () {"},
{"lineNum":"  196","line":"  local path=$1","class":"lineCov","hits":"1","order":"69",},
{"lineNum":"  197","line":"  local base=$(basename \"$path\")","class":"lineCov","hits":"1","order":"84",},
{"lineNum":"  198","line":"  local dir=$(dirname \"$path\")","class":"lineCov","hits":"1","order":"89",},
{"lineNum":"  199","line":"  shift","class":"lineCov","hits":"1","order":"35",},
{"lineNum":"  200","line":""},
{"lineNum":"  201","line":"  local shasum=$(get_shasum \"$dir\" \"$base\")","class":"lineCov","hits":"1","order":"90",},
{"lineNum":"  202","line":""},
{"lineNum":"  203","line":"  local cache=$NAVE_DIR/cache","class":"lineCov","hits":"1","order":"34",},
{"lineNum":"  204","line":"  if [ \"$shasum\" == \"\" ]; then","class":"lineCov","hits":"1","order":"92",},
{"lineNum":"  205","line":"    # this should not happen, blow away cache and try 1 more time"},
{"lineNum":"  206","line":"    rm -- \"$cache/$dir/SHASUMS256.txt\"* || true","class":"lineCov","hits":"1","order":"258",},
{"lineNum":"  207","line":"    shasum=$(get_shasum \"$dir\" \"$base\")","class":"lineCov","hits":"1","order":"261",},
{"lineNum":"  208","line":"  fi"},
{"lineNum":"  209","line":""},
{"lineNum":"  210","line":"  if [ \"$shasum\" == \"\" ]; then","class":"lineCov","hits":"1","order":"95",},
{"lineNum":"  211","line":"    err \"shasum not found for $base. aborting download.\"","class":"lineCov","hits":"1","order":"257",},
{"lineNum":"  212","line":"    return 2","class":"lineCov","hits":"1","order":"256",},
{"lineNum":"  213","line":"  fi"},
{"lineNum":"  214","line":""},
{"lineNum":"  215","line":"  if [ -f \"$cache/$dir/$shasum.tgz\" ]; then","class":"lineCov","hits":"1","order":"31",},
{"lineNum":"  216","line":"    echo \"$cache/$dir/$shasum.tgz\"","class":"lineCov","hits":"1","order":"350",},
{"lineNum":"  217","line":"    return","class":"lineCov","hits":"1","order":"349",},
{"lineNum":"  218","line":"  fi"},
{"lineNum":"  219","line":""},
{"lineNum":"  220","line":"  get_ \"$NODEDIST/$path\" \"$@\" > \"$cache/$dir/$base\"","class":"lineCov","hits":"1","order":"79",},
{"lineNum":"  221","line":"  if [ $? -ne 0 ]; then","class":"lineCov","hits":"1","order":"29",},
{"lineNum":"  222","line":"    rm \"$cache/$dir/$base\"","class":"lineCov","hits":"1","order":"262",},
{"lineNum":"  223","line":"    return 2","class":"lineCov","hits":"1","order":"263",},
{"lineNum":"  224","line":"  fi"},
{"lineNum":"  225","line":""},
{"lineNum":"  226","line":"  local actualshasum=$(shasum -a 256 \"$cache/$dir/$base\" | awk \'{print $1}\')","class":"lineCov","hits":"1","order":"72",},
{"lineNum":"  227","line":"  if ! [ \"$shasum\" = \"$actualshasum\" ]; then","class":"lineCov","hits":"1","order":"28",},
{"lineNum":"  228","line":"    err \"shasum mismatch, expect $shasum, got $actualshasum\"","class":"lineCov","hits":"1","order":"260",},
{"lineNum":"  229","line":"    rm \"$cache/$dir/$base\"","class":"lineCov","hits":"1","order":"259",},
{"lineNum":"  230","line":"    return 2","class":"lineCov","hits":"1","order":"255",},
{"lineNum":"  231","line":"  fi"},
{"lineNum":"  232","line":""},
{"lineNum":"  233","line":"  mv \"$cache/$dir/$base\" \"$cache/$dir/$shasum.tgz\"","class":"lineCov","hits":"1","order":"52",},
{"lineNum":"  234","line":"  echo \"$cache/$dir/$shasum.tgz\"","class":"lineCov","hits":"1","order":"27",},
{"lineNum":"  235","line":"}"},
{"lineNum":"  236","line":""},
{"lineNum":"  237","line":"get_timestamp () {"},
{"lineNum":"  238","line":"  local file=$1","class":"lineCov","hits":"1","order":"195",},
{"lineNum":"  239","line":"  local n=$(cat $file 2>/dev/null)","class":"lineCov","hits":"1","order":"197",},
{"lineNum":"  240","line":"  local numre=\'^[0-9]+$\'","class":"lineCov","hits":"1","order":"177",},
{"lineNum":"  241","line":"  if [ -n \"$n\" ] && [[ $n =~ $numre ]]; then","class":"lineCov","hits":"1","order":"186",},
{"lineNum":"  242","line":"    echo $n","class":"lineCov","hits":"1","order":"188",},
{"lineNum":"  243","line":"  else"},
{"lineNum":"  244","line":"    echo 0","class":"lineCov","hits":"1","order":"264",},
{"lineNum":"  245","line":"  fi"},
{"lineNum":"  246","line":"}"},
{"lineNum":"  247","line":""},
{"lineNum":"  248","line":"get_html () {"},
{"lineNum":"  249","line":"  local path=$1","class":"lineCov","hits":"1","order":"44",},
{"lineNum":"  250","line":"  local base=$(basename \"$path\")","class":"lineCov","hits":"1","order":"26",},
{"lineNum":"  251","line":"  local dir=$(dirname \"$path\")","class":"lineCov","hits":"1","order":"103",},
{"lineNum":"  252","line":"  shift","class":"lineCov","hits":"1","order":"104",},
{"lineNum":"  253","line":""},
{"lineNum":"  254","line":"  if [ \"$dir\" = \"/\" ]; then","class":"lineCov","hits":"1","order":"105",},
{"lineNum":"  255","line":"    dir=\"\"","class":"lineCov","hits":"1","order":"155",},
{"lineNum":"  256","line":"  fi"},
{"lineNum":"  257","line":"  if [ \"$base\" = \"/\" ]; then","class":"lineCov","hits":"1","order":"106",},
{"lineNum":"  258","line":"    base=\"\"","class":"lineCov","hits":"1","order":"156",},
{"lineNum":"  259","line":"  fi"},
{"lineNum":"  260","line":"  if [ \"$base\" = \"\" ]; then","class":"lineCov","hits":"1","order":"107",},
{"lineNum":"  261","line":"    base=\"index.html\"","class":"lineCov","hits":"1","order":"157",},
{"lineNum":"  262","line":"  fi"},
{"lineNum":"  263","line":""},
{"lineNum":"  264","line":"  local cache=\"$NAVE_DIR/cache/$dir\"","class":"lineCov","hits":"1","order":"108",},
{"lineNum":"  265","line":"  mkdirp \"$cache\"","class":"lineCov","hits":"1","order":"109",},
{"lineNum":"  266","line":"  local tsfile=\"$cache/${base}-timestamp\"","class":"lineCov","hits":"1","order":"110",},
{"lineNum":"  267","line":""},
{"lineNum":"  268","line":"  local dur=$NAVE_CACHE_DUR","class":"lineCov","hits":"1","order":"111",},
{"lineNum":"  269","line":"  if ! [ \"$cache/$base\" = \"$cache/index.html\" ]; then","class":"lineCov","hits":"1","order":"112",},
{"lineNum":"  270","line":"    dur=$[ $dur * 365 ]","class":"lineCov","hits":"1","order":"113",},
{"lineNum":"  271","line":"  fi"},
{"lineNum":"  272","line":""},
{"lineNum":"  273","line":"  if [ -f \"$tsfile\" ] && \\","class":"lineCov","hits":"1","order":"114",},
{"lineNum":"  274","line":"     [ -f \"$cache/$base\" ] && \\"},
{"lineNum":"  275","line":"     [ $[ $(date \'+%s\') - $(get_timestamp $tsfile) ] -lt $dur ]; then"},
{"lineNum":"  276","line":"    cat \"$cache/$base\"","class":"lineCov","hits":"1","order":"200",},
{"lineNum":"  277","line":"  else"},
{"lineNum":"  278","line":"    get_ \"$NODEDIST/$path\" -s \"$@\" > \"$cache/${base}.tmp\"","class":"lineCov","hits":"1","order":"115",},
{"lineNum":"  279","line":"    local ret=$?","class":"lineCov","hits":"1","order":"59",},
{"lineNum":"  280","line":"    if [ \"$ret\" -ne 0 ]; then","class":"lineCov","hits":"1","order":"61",},
{"lineNum":"  281","line":"      rm \"$cache/${base}.tmp\"","class":"lineCov","hits":"1","order":"357",},
{"lineNum":"  282","line":"      ret=2","class":"lineCov","hits":"1","order":"358",},
{"lineNum":"  283","line":"      if [ -f \"$cache/$base\" ]; then","class":"lineCov","hits":"1","order":"353",},
{"lineNum":"  284","line":"        cat \"$cache/$base\"","class":"lineCov","hits":"1","order":"355",},
{"lineNum":"  285","line":"        ret=$cacheret","class":"lineCov","hits":"1","order":"359",},
{"lineNum":"  286","line":"      fi"},
{"lineNum":"  287","line":"    else"},
{"lineNum":"  288","line":"      mv \"$cache/${base}.tmp\" \"$cache/$base\"","class":"lineCov","hits":"1","order":"116",},
{"lineNum":"  289","line":"      date \'+%s\' > \"$tsfile\"","class":"lineCov","hits":"1","order":"117",},
{"lineNum":"  290","line":"      cat \"$cache/$base\"","class":"lineCov","hits":"1","order":"118",},
{"lineNum":"  291","line":"    fi"},
{"lineNum":"  292","line":"    return $ret","class":"lineCov","hits":"1","order":"119",},
{"lineNum":"  293","line":"  fi"},
{"lineNum":"  294","line":"}"},
{"lineNum":"  295","line":""},
{"lineNum":"  296","line":"get_ () {"},
{"lineNum":"  297","line":"  curl \"$@\" -H \"user-agent:$NAVEUA\" || return 2","class":"lineCov","hits":"1","order":"71",},
{"lineNum":"  298","line":"}"},
{"lineNum":"  299","line":""},
{"lineNum":"  300","line":"get () {"},
{"lineNum":"  301","line":"  local path=$1","class":"lineCov","hits":"1","order":"88",},
{"lineNum":"  302","line":"  local base=$(basename \"$path\")","class":"lineCov","hits":"1","order":"120",},
{"lineNum":"  303","line":"  local dir=$(dirname \"$path\")","class":"lineCov","hits":"1","order":"55",},
{"lineNum":"  304","line":"  shift","class":"lineCov","hits":"1","order":"51",},
{"lineNum":"  305","line":""},
{"lineNum":"  306","line":"  case \"$base\" in","class":"lineCov","hits":"1","order":"49",},
{"lineNum":"  307","line":"    *.tar.gz|*.tgz)"},
{"lineNum":"  308","line":"      get_tgz \"$path\" \"$@\"","class":"lineCov","hits":"1","order":"57",},
{"lineNum":"  309","line":"      ;;"},
{"lineNum":"  310","line":"    *)"},
{"lineNum":"  311","line":"      get_html \"$path\" \"$@\"","class":"lineCov","hits":"1","order":"151",},
{"lineNum":"  312","line":"      ;;"},
{"lineNum":"  313","line":"  esac"},
{"lineNum":"  314","line":"}"},
{"lineNum":"  315","line":""},
{"lineNum":"  316","line":"bin_available () {"},
{"lineNum":"  317","line":"  local version=\"$1\"","class":"lineCov","hits":"1","order":"121",},
{"lineNum":"  318","line":"  if [ \"$NAVE_SRC_ONLY\" = \"1\" ]; then","class":"lineCov","hits":"1","order":"122",},
{"lineNum":"  319","line":"    return 1","class":"lineCov","hits":"1","order":"163",},
{"lineNum":"  320","line":"  elif osarch >/dev/null; then","class":"lineCov","hits":"1","order":"77",},
{"lineNum":"  321","line":"    # binaries started with node 0.8.6"},
{"lineNum":"  322","line":"    case \"$version\" in","class":"lineCov","hits":"1","order":"123",},
{"lineNum":"  323","line":"      0.8.[012345]) return 1 ;;","class":"lineCov","hits":"1","order":"161",},
{"lineNum":"  324","line":"      0.[01234567].*) return 1 ;;","class":"lineCov","hits":"1","order":"162",},
{"lineNum":"  325","line":"      *) return 0 ;;","class":"lineCov","hits":"1","order":"124",},
{"lineNum":"  326","line":"    esac"},
{"lineNum":"  327","line":"  else"},
{"lineNum":"  328","line":"    return 1","class":"lineCov","hits":"1","order":"214",},
{"lineNum":"  329","line":"  fi"},
{"lineNum":"  330","line":"}"},
{"lineNum":"  331","line":""},
{"lineNum":"  332","line":"build_binary () {"},
{"lineNum":"  333","line":"  local version=\"$1\"","class":"lineCov","hits":"1","order":"125",},
{"lineNum":"  334","line":"  if ! bin_available \"$version\"; then","class":"lineCov","hits":"1","order":"93",},
{"lineNum":"  335","line":"    return 1","class":"lineCov","hits":"1","order":"216",},
{"lineNum":"  336","line":"  fi"},
{"lineNum":"  337","line":"  local targetfolder=\"$2\"","class":"lineCov","hits":"1","order":"94",},
{"lineNum":"  338","line":"  local t=\"$version-$(osarch)\"","class":"lineCov","hits":"1","order":"126",},
{"lineNum":"  339","line":"  local url=\"v$version/node-v${t}.tar.gz\"","class":"lineCov","hits":"1","order":"127",},
{"lineNum":"  340","line":"  # have to do in 2 commands or else the \"local\" returns 0!"},
{"lineNum":"  341","line":"  local tarfile","class":"lineCov","hits":"1","order":"128",},
{"lineNum":"  342","line":"  tarfile=$(get \"$url\" -#Lf)","class":"lineCov","hits":"1","order":"129",},
{"lineNum":"  343","line":"  local ret=$?","class":"lineCov","hits":"1","order":"130",},
{"lineNum":"  344","line":"  if [ $ret -eq 0 ]; then","class":"lineCov","hits":"1","order":"96",},
{"lineNum":"  345","line":"    # it worked!"},
{"lineNum":"  346","line":"    cat \"$tarfile\" | $tar xz -C \"$targetfolder\" --strip-components 1","class":"lineCov","hits":"1","order":"131",},
{"lineNum":"  347","line":"  else"},
{"lineNum":"  348","line":"    return $ret","class":"lineCov","hits":"1","order":"215",},
{"lineNum":"  349","line":"  fi"},
{"lineNum":"  350","line":"}"},
{"lineNum":"  351","line":""},
{"lineNum":"  352","line":"build () {"},
{"lineNum":"  353","line":"  local version=\"$1\"","class":"lineCov","hits":"1","order":"101",},
{"lineNum":"  354","line":"  local targetfolder=\"$2\"","class":"lineCov","hits":"1","order":"83",},
{"lineNum":"  355","line":""},
{"lineNum":"  356","line":"  # shortcut - try the binary if possible."},
{"lineNum":"  357","line":"  if bin_available $version; then","class":"lineCov","hits":"1","order":"132",},
{"lineNum":"  358","line":"    if build_binary \"$version\" \"$targetfolder\"; then","class":"lineCov","hits":"1","order":"87",},
{"lineNum":"  359","line":"      return 0","class":"lineCov","hits":"1","order":"74",},
{"lineNum":"  360","line":"    else"},
{"lineNum":"  361","line":"      nave_uninstall \"$version\"","class":"lineCov","hits":"1","order":"201",},
{"lineNum":"  362","line":"      err \"Binary install failed, trying source.\"","class":"lineCov","hits":"1","order":"183",},
{"lineNum":"  363","line":"    fi"},
{"lineNum":"  364","line":"  fi"},
{"lineNum":"  365","line":""},
{"lineNum":"  366","line":"  if ! nave_fetch \"$version\"; then","class":"lineCov","hits":"1","order":"202",},
{"lineNum":"  367","line":"    # fetch failed, don\'t continue and try to build it."},
{"lineNum":"  368","line":"    return 1","class":"lineCov","hits":"1","order":"196",},
{"lineNum":"  369","line":"  fi"},
{"lineNum":"  370","line":""},
{"lineNum":"  371","line":"  local src=\"$NAVE_SRC/$version\"","class":"lineCov","hits":"1","order":"187",},
{"lineNum":"  372","line":"  local jobs=$NAVE_JOBS","class":"lineCov","hits":"1","order":"189",},
{"lineNum":"  373","line":"  jobs=${jobs:-$JOBS}","class":"lineCov","hits":"1","order":"198",},
{"lineNum":"  374","line":"  jobs=${jobs:-$(sysctl -n hw.ncpu)}","class":"lineCov","hits":"1","order":"176",},
{"lineNum":"  375","line":"  jobs=${jobs:-2}","class":"lineCov","hits":"1","order":"203",},
{"lineNum":"  376","line":""},
{"lineNum":"  377","line":"  ( cd -- \"$src\" &>/dev/null","class":"lineCov","hits":"1","order":"199",},
{"lineNum":"  378","line":"    source_naverc","class":"lineCov","hits":"1","order":"204",},
{"lineNum":"  379","line":"    if [ \"$NAVE_CONFIG\" == \"\" ]; then","class":"lineCov","hits":"1","order":"175",},
{"lineNum":"  380","line":"      NAVE_CONFIG=()"},
{"lineNum":"  381","line":"    fi"},
{"lineNum":"  382","line":"    if ! JOBS=$jobs ./configure \"${NAVE_CONFIG[@]}\" --prefix=\"$2\"; then","class":"lineCov","hits":"1","order":"205",},
{"lineNum":"  383","line":"      err \"Failed to configure $version\"","class":"lineCov","hits":"1","order":"206",},
{"lineNum":"  384","line":"      return 1","class":"lineCov","hits":"1","order":"207",},
{"lineNum":"  385","line":"    fi"},
{"lineNum":"  386","line":"    if ! JOBS=$jobs make -j$jobs; then","class":"lineCov","hits":"1","order":"208",},
{"lineNum":"  387","line":"      err \"Failed to make $version\"","class":"lineCov","hits":"1","order":"209",},
{"lineNum":"  388","line":"      return 1","class":"lineCov","hits":"1","order":"174",},
{"lineNum":"  389","line":"    fi"},
{"lineNum":"  390","line":"    if ! make install; then","class":"lineCov","hits":"1","order":"173",},
{"lineNum":"  391","line":"      err \"Failed to install $version\"","class":"lineCov","hits":"1","order":"210",},
{"lineNum":"  392","line":"      return 1","class":"lineCov","hits":"1","order":"211",},
{"lineNum":"  393","line":"    fi"},
{"lineNum":"  394","line":"  )"},
{"lineNum":"  395","line":"}"},
{"lineNum":"  396","line":""},
{"lineNum":"  397","line":"nave_cache () {"},
{"lineNum":"  398","line":"  local cache=\"$NAVE_DIR/cache\"","class":"lineCov","hits":"1","order":"317",},
{"lineNum":"  399","line":"  local subcmd=\"$1\"","class":"lineCov","hits":"1","order":"318",},
{"lineNum":"  400","line":"  shift","class":"lineCov","hits":"1","order":"319",},
{"lineNum":"  401","line":"  mkdirp \"$cache\"","class":"lineCov","hits":"1","order":"315",},
{"lineNum":"  402","line":"  case \"$subcmd\" in","class":"lineCov","hits":"1","order":"314",},
{"lineNum":"  403","line":"    clear|empty|clean)"},
{"lineNum":"  404","line":"      rm -rf \"$cache\"","class":"lineCov","hits":"1","order":"320",},
{"lineNum":"  405","line":"      ;;"},
{"lineNum":"  406","line":"    ls)"},
{"lineNum":"  407","line":"      find \"$cache\" \"$@\"","class":"lineCov","hits":"1","order":"316",},
{"lineNum":"  408","line":"      ;;"},
{"lineNum":"  409","line":"    tree)"},
{"lineNum":"  410","line":"      tree \"$cache\" \"$@\"","class":"lineCov","hits":"1","order":"321",},
{"lineNum":"  411","line":"      ;;"},
{"lineNum":"  412","line":"    *)"},
{"lineNum":"  413","line":"      cat >&2 <<USAGE","class":"lineCov","hits":"1","order":"322",},
{"lineNum":"  414","line":"usage: nave cache [clear|ls|tree]"},
{"lineNum":"  415","line":"USAGE"},
{"lineNum":"  416","line":"      return 1","class":"lineCov","hits":"1","order":"313",},
{"lineNum":"  417","line":"      ;;"},
{"lineNum":"  418","line":"  esac"},
{"lineNum":"  419","line":"}"},
{"lineNum":"  420","line":""},
{"lineNum":"  421","line":"# Run this on cd\'ing into new directories to automatically enter that"},
{"lineNum":"  422","line":"# nave setting in that directory."},
{"lineNum":"  423","line":"nave_auto () {"},
{"lineNum":"  424","line":"  if [ $# -gt 0 ]; then","class":"lineCov","hits":"1","order":"311",},
{"lineNum":"  425","line":"    cd -- $1","class":"lineCov","hits":"1","order":"309",},
{"lineNum":"  426","line":"    if [ $? -ne 0 ]; then","class":"lineCov","hits":"1","order":"310",},
{"lineNum":"  427","line":"      exec $SHELL","class":"lineCov","hits":"1","order":"308",},
{"lineNum":"  428","line":"    fi"},
{"lineNum":"  429","line":"    shift","class":"lineCov","hits":"1","order":"302",},
{"lineNum":"  430","line":"  fi"},
{"lineNum":"  431","line":""},
{"lineNum":"  432","line":"  local rcfile=$(local_naverc_filename \"$(pwd)\")","class":"lineCov","hits":"1","order":"305",},
{"lineNum":"  433","line":"  if [ $? -eq 0 ] && [ -n \"$rcfile\" ]; then","class":"lineCov","hits":"1","order":"304",},
{"lineNum":"  434","line":"    local args=($(cat \"$rcfile\"))","class":"lineCov","hits":"1","order":"303",},
{"lineNum":"  435","line":"    if [ \"$#\" -eq 0 ]; then","class":"lineCov","hits":"1","order":"306",},
{"lineNum":"  436","line":"      nave_use \"${args[@]}\" exec $SHELL","class":"lineCov","hits":"1","order":"301",},
{"lineNum":"  437","line":"    else"},
{"lineNum":"  438","line":"      nave_use \"${args[@]}\" $SHELL -c \"$(enquote_all \"$@\")\"","class":"lineCov","hits":"1","order":"312",},
{"lineNum":"  439","line":"    fi"},
{"lineNum":"  440","line":"    nave_exit","class":"lineCov","hits":"1","order":"307",},
{"lineNum":"  441","line":"  fi"},
{"lineNum":"  442","line":"}"},
{"lineNum":"  443","line":""},
{"lineNum":"  444","line":"nave_usemain () {"},
{"lineNum":"  445","line":"  if [ ${NAVELVL-0} -gt 0 ]; then","class":"lineCov","hits":"1","order":"479",},
{"lineNum":"  446","line":"    err \"Can\'t usemain inside a nave subshell. Exit to main shell.\"","class":"lineCov","hits":"1","order":"480",},
{"lineNum":"  447","line":"    return 1","class":"lineCov","hits":"1","order":"474",},
{"lineNum":"  448","line":"  fi"},
{"lineNum":"  449","line":"  local version=$(ver \"$1\")","class":"lineCov","hits":"1","order":"472",},
{"lineNum":"  450","line":"  local current=$(node -v 2>/dev/null)","class":"lineCov","hits":"1","order":"481",},
{"lineNum":"  451","line":"  local wn=$(which node)","class":"lineCov","hits":"1","order":"482",},
{"lineNum":"  452","line":"  local prefix=${PREFIX:-/usr/local}","class":"lineCov","hits":"1","order":"483",},
{"lineNum":"  453","line":"  if [ -x \"$wn\" ] && [[ \"$current\" =~ ^v[0-9]+\\.[0-9]+\\.[0-9]+ ]]; then","class":"lineCov","hits":"1","order":"473",},
{"lineNum":"  454","line":"    local p=\"${wn/\\/bin\\/node/}\"","class":"lineCov","hits":"1","order":"475",},
{"lineNum":"  455","line":"    if [ \"$p\" != \"\" ] && [ -d \"$prefix\" ]; then","class":"lineCov","hits":"1","order":"476",},
{"lineNum":"  456","line":"      prefix=$p","class":"lineCov","hits":"1","order":"471",},
{"lineNum":"  457","line":"    fi"},
{"lineNum":"  458","line":"  fi"},
{"lineNum":"  459","line":"  current=\"${current/v/}\"","class":"lineCov","hits":"1","order":"484",},
{"lineNum":"  460","line":"  if [ \"$current\" == \"$version\" ]; then","class":"lineCov","hits":"1","order":"470",},
{"lineNum":"  461","line":"    return 0","class":"lineCov","hits":"1","order":"477",},
{"lineNum":"  462","line":"  fi"},
{"lineNum":"  463","line":""},
{"lineNum":"  464","line":"  build \"$version\" \"$prefix\"","class":"lineCov","hits":"1","order":"478",},
{"lineNum":"  465","line":"}"},
{"lineNum":"  466","line":""},
{"lineNum":"  467","line":"nave_install () {"},
{"lineNum":"  468","line":"  if [ $# -eq 2 ]; then","class":"lineCov","hits":"1","order":"32",},
{"lineNum":"  469","line":"    add_named_env \"$1\" \"$2\"","class":"lineCov","hits":"1","order":"397",},
{"lineNum":"  470","line":"    return $?","class":"lineCov","hits":"1","order":"429",},
{"lineNum":"  471","line":"  fi"},
{"lineNum":"  472","line":""},
{"lineNum":"  473","line":"  local version=$(ver \"$1\" \"NONAMES\")","class":"lineCov","hits":"1","order":"30",},
{"lineNum":"  474","line":""},
{"lineNum":"  475","line":"  # special case for newer macOS machines using arm64"},
{"lineNum":"  476","line":"  if [[ \"$(uname -m)\" =~ \"arm64\" ]] && [[ \"$version\" =~ ^([0-9]|10|12|14)\\. ]]; then","class":"lineCov","hits":"1","order":"144",},
{"lineNum":"  477","line":"    if type arch &>/dev/null; then","class":"lineCov","hits":"1","order":"152",},
{"lineNum":"  478","line":"      echo \"attempting to switch to x86 for old node version\" >&2","class":"lineCov","hits":"1","order":"158",},
{"lineNum":"  479","line":"      # have to use the system\'s bash, in case $(which bash) is"},
{"lineNum":"  480","line":"      # compiled for this architecture only, more likely the builtin"},
{"lineNum":"  481","line":"      # one is set up for backwards compatibility."},
{"lineNum":"  482","line":"      arch -x86_64 /bin/bash $0 install \"$version\"","class":"lineCov","hits":"1","order":"160",},
{"lineNum":"  483","line":"      return $?","class":"lineCov","hits":"1","order":"159",},
{"lineNum":"  484","line":"    else"},
{"lineNum":"  485","line":"      echo \"Warning: using old node version on arm64, might fail\" >&2","class":"lineCov","hits":"1","order":"153",},
{"lineNum":"  486","line":"    fi"},
{"lineNum":"  487","line":"  fi"},
{"lineNum":"  488","line":""},
{"lineNum":"  489","line":"  if [ -z \"$version\" ]; then","class":"lineCov","hits":"1","order":"25",},
{"lineNum":"  490","line":"    err \"Must supply a version (\'lts\', \'stable\', \'latest\' or numeric)\"","class":"lineCov","hits":"1","order":"374",},
{"lineNum":"  491","line":"    return 1","class":"lineCov","hits":"1","order":"373",},
{"lineNum":"  492","line":"  fi"},
{"lineNum":"  493","line":"  if nave_installed \"$version\"; then","class":"lineCov","hits":"1","order":"24",},
{"lineNum":"  494","line":"    return 0","class":"lineCov","hits":"1","order":"23",},
{"lineNum":"  495","line":"  fi"},
{"lineNum":"  496","line":"  local install=\"$NAVE_ROOT/$version\"","class":"lineCov","hits":"1","order":"22",},
{"lineNum":"  497","line":"  mkdirp \"$install\"","class":"lineCov","hits":"1","order":"21",},
{"lineNum":"  498","line":""},
{"lineNum":"  499","line":"  build \"$version\" \"$install\"","class":"lineCov","hits":"1","order":"20",},
{"lineNum":"  500","line":"  local ret=$?","class":"lineCov","hits":"1","order":"19",},
{"lineNum":"  501","line":"  if [ $ret -ne 0 ]; then","class":"lineCov","hits":"1","order":"18",},
{"lineNum":"  502","line":"    rimraf \"$install\"","class":"lineCov","hits":"1","order":"372",},
{"lineNum":"  503","line":"    return $ret","class":"lineCov","hits":"1","order":"371",},
{"lineNum":"  504","line":"  fi"},
{"lineNum":"  505","line":"}"},
{"lineNum":"  506","line":""},
{"lineNum":"  507","line":"nave_exit () {"},
{"lineNum":"  508","line":"  if [ -n \"$NAVEPATH\" ]; then","class":"lineCov","hits":"1","order":"348",},
{"lineNum":"  509","line":"    export PATH=${PATH//:$NAVEPATH/}","class":"lineCov","hits":"1","order":"347",},
{"lineNum":"  510","line":"  fi"},
{"lineNum":"  511","line":"  unset NAVEDEBUG","class":"lineCov","hits":"1","order":"346",},
{"lineNum":"  512","line":"  unset NAVE_JOBS","class":"lineCov","hits":"1","order":"345",},
{"lineNum":"  513","line":"  unset NAVELVL","class":"lineCov","hits":"1","order":"344",},
{"lineNum":"  514","line":"  unset NAVEPATH","class":"lineCov","hits":"1","order":"343",},
{"lineNum":"  515","line":"  unset NAVEVERSION","class":"lineCov","hits":"1","order":"342",},
{"lineNum":"  516","line":"  unset NAVENAME","class":"lineCov","hits":"1","order":"341",},
{"lineNum":"  517","line":"  unset NAVE","class":"lineCov","hits":"1","order":"340",},
{"lineNum":"  518","line":"  unset NAVE_SRC","class":"lineCov","hits":"1","order":"339",},
{"lineNum":"  519","line":"  unset NAVE_CONFIG","class":"lineCov","hits":"1","order":"338",},
{"lineNum":"  520","line":"  unset NAVE_ROOT","class":"lineCov","hits":"1","order":"337",},
{"lineNum":"  521","line":"  unset NODE_PATH","class":"lineCov","hits":"1","order":"336",},
{"lineNum":"  522","line":"  unset NAVE_LOGIN","class":"lineCov","hits":"1","order":"335",},
{"lineNum":"  523","line":"  unset NAVE_DIR","class":"lineCov","hits":"1","order":"334",},
{"lineNum":"  524","line":"  unset npm_config_binroot","class":"lineCov","hits":"1","order":"333",},
{"lineNum":"  525","line":"  unset npm_config_root","class":"lineCov","hits":"1","order":"332",},
{"lineNum":"  526","line":"  unset npm_config_manroot","class":"lineCov","hits":"1","order":"331",},
{"lineNum":"  527","line":"  unset npm_config_prefix","class":"lineCov","hits":"1","order":"330",},
{"lineNum":"  528","line":"  exec $SHELL","class":"lineCov","hits":"1","order":"329",},
{"lineNum":"  529","line":"}"},
{"lineNum":"  530","line":""},
{"lineNum":"  531","line":"naverc_filename () {"},
{"lineNum":"  532","line":"  echo $(cd -- $NAVE_DIR/.. &>/dev/null; pwd)/.naverc","class":"lineCov","hits":"1","order":"166",},
{"lineNum":"  533","line":"}"},
{"lineNum":"  534","line":""},
{"lineNum":"  535","line":"local_naverc_filename () {"},
{"lineNum":"  536","line":"  local dir=\"$1\"","class":"lineCov","hits":"1","order":"300",},
{"lineNum":"  537","line":"  while ! [ \"$dir\" = \"/\" ] && ! [ \"$dir\" = \".\" ]; do","class":"lineCov","hits":"1","order":"299",},
{"lineNum":"  538","line":"    if [ -f \"$dir\"/.naverc ]; then","class":"lineCov","hits":"1","order":"298",},
{"lineNum":"  539","line":"      echo \"$dir\"/.naverc","class":"lineCov","hits":"1","order":"297",},
{"lineNum":"  540","line":"      return 0","class":"lineCov","hits":"1","order":"296",},
{"lineNum":"  541","line":"    elif [ -f \"$dir\"/.nvmrc ]; then","class":"lineCov","hits":"1","order":"295",},
{"lineNum":"  542","line":"      echo \"$dir\"/.nvmrc","class":"lineCov","hits":"1","order":"294",},
{"lineNum":"  543","line":"      return 0","class":"lineCov","hits":"1","order":"293",},
{"lineNum":"  544","line":"    elif [ -f \"$dir\"/.git ] || [ -d \"$dir\"/.git ]; then","class":"lineCov","hits":"1","order":"292",},
{"lineNum":"  545","line":"      break","class":"lineCov","hits":"1","order":"291",},
{"lineNum":"  546","line":"    else"},
{"lineNum":"  547","line":"      dir=$(dirname -- \"$dir\")","class":"lineCov","hits":"1","order":"290",},
{"lineNum":"  548","line":"    fi"},
{"lineNum":"  549","line":"  done"},
{"lineNum":"  550","line":"  return 1","class":"lineCov","hits":"1","order":"289",},
{"lineNum":"  551","line":"}"},
{"lineNum":"  552","line":""},
{"lineNum":"  553","line":"source_naverc () {"},
{"lineNum":"  554","line":"  local naverc=$(naverc_filename)","class":"lineCov","hits":"1","order":"165",},
{"lineNum":"  555","line":"  if [ -f \"$naverc\" ]; then","class":"lineCov","hits":"1","order":"164",},
{"lineNum":"  556","line":"    . \"$naverc\"","class":"lineCov","hits":"1","order":"439",},
{"lineNum":"  557","line":"  fi"},
{"lineNum":"  558","line":"}"},
{"lineNum":"  559","line":""},
{"lineNum":"  560","line":"write_rcfile () {"},
{"lineNum":"  561","line":"  mkdirp \"$NAVE_DIR\" \"could not make NAVE_DIR ($NAVE_DIR)\"","class":"lineCov","hits":"1","order":"220",},
{"lineNum":"  562","line":""},
{"lineNum":"  563","line":"  # set up the naverc init file."},
{"lineNum":"  564","line":"  # For zsh compatibility, we name this file \".zshenv\" instead of"},
{"lineNum":"  565","line":"  # the more reasonable \"naverc\" name."},
{"lineNum":"  566","line":"  # Important! Update this number any time the init content is changed."},
{"lineNum":"  567","line":"  local rcversion=\"#4\"","class":"lineCov","hits":"1","order":"223",},
{"lineNum":"  568","line":"  local rcfile=\"$NAVE_DIR/.zshenv\"","class":"lineCov","hits":"1","order":"224",},
{"lineNum":"  569","line":"  if ! [ -f \"$rcfile\" ] \\","class":"lineCov","hits":"1","order":"219",},
{"lineNum":"  570","line":"      || [ \"$(head -n1 \"$rcfile\")\" != \"$rcversion\" ]; then"},
{"lineNum":"  571","line":""},
{"lineNum":"  572","line":"    local homercfile=$(naverc_filename)","class":"lineCov","hits":"1","order":"218",},
{"lineNum":"  573","line":"    cat > \"$rcfile\" <<RC","class":"lineCov","hits":"1","order":"217",},
{"lineNum":"  574","line":"$rcversion"},
{"lineNum":"  575","line":"[ \"\\$NAVE_DEBUG\" != \"\" ] && set -x || true"},
{"lineNum":"  576","line":"if [ \"\\$BASH\" != \"\" ]; then"},
{"lineNum":"  577","line":"  if [ \"\\$NAVE_LOGIN\" != \"\" ]; then"},
{"lineNum":"  578","line":"    [ -f ~/.bash_profile ] && . ~/.bash_profile || true"},
{"lineNum":"  579","line":"    [ -f ~/.bash_login ] && .  ~/.bash_login || true"},
{"lineNum":"  580","line":"    [ -f ~/.profile ] && . ~/.profile || true"},
{"lineNum":"  581","line":"  else"},
{"lineNum":"  582","line":"    [ -f ~/.bashrc ] && . ~/.bashrc || true"},
{"lineNum":"  583","line":"  fi"},
{"lineNum":"  584","line":"else"},
{"lineNum":"  585","line":"  [ -f ~/.zshenv ] && . ~/.zshenv || true"},
{"lineNum":"  586","line":"  export DISABLE_AUTO_UPDATE=true"},
{"lineNum":"  587","line":"  if [ \"\\$NAVE_LOGIN\" != \"\" ]; then"},
{"lineNum":"  588","line":"    [ -f ~/.zprofile ] && . ~/.zprofile || true"},
{"lineNum":"  589","line":"    [ -f ~/.zshrc ] && . ~/.zshrc || true"},
{"lineNum":"  590","line":"    [ -f ~/.zlogin ] && . ~/.zlogin || true"},
{"lineNum":"  591","line":"  else"},
{"lineNum":"  592","line":"    [ -f ~/.zshrc ] && . ~/.zshrc || true"},
{"lineNum":"  593","line":"  fi"},
{"lineNum":"  594","line":"fi"},
{"lineNum":"  595","line":"unset ZDOTDIR"},
{"lineNum":"  596","line":"export PATH=\\$NAVEPATH:\\$PATH"},
{"lineNum":"  597","line":"[ -f ${homercfile} ] && . ${homercfile} || true"},
{"lineNum":"  598","line":"RC"},
{"lineNum":"  599","line":""},
{"lineNum":"  600","line":"    cat > \"$NAVE_DIR/.zlogout\" <<RC","class":"lineCov","hits":"1","order":"227",},
{"lineNum":"  601","line":"[ -f ~/.zlogout ] && . ~/.zlogout || true"},
{"lineNum":"  602","line":"RC"},
{"lineNum":"  603","line":""},
{"lineNum":"  604","line":"  fi"},
{"lineNum":"  605","line":""},
{"lineNum":"  606","line":"  # couldn\'t write file"},
{"lineNum":"  607","line":"  if ! [ -f \"$rcfile\" ] || [ \"$(head -n1 \"$rcfile\")\" != \"$rcversion\" ]; then","class":"lineCov","hits":"1","order":"221",},
{"lineNum":"  608","line":"    fail \"Failed writing rc files to $NAVE_DIR\"","class":"lineCov","hits":"1","order":"485",},
{"lineNum":"  609","line":"  fi"},
{"lineNum":"  610","line":"}"},
{"lineNum":"  611","line":""},
{"lineNum":"  612","line":"nave_test () {"},
{"lineNum":"  613","line":"  local version=$(ver \"$1\")","class":"lineCov","hits":"1","order":"438",},
{"lineNum":"  614","line":"  nave_fetch \"$version\"","class":"lineCov","hits":"1","order":"440",},
{"lineNum":"  615","line":"  local src=\"$NAVE_SRC/$version\"","class":"lineCov","hits":"1","order":"441",},
{"lineNum":"  616","line":"  ( cd -- \"$src\"","class":"lineCov","hits":"1","order":"442",},
{"lineNum":"  617","line":"    source_naverc","class":"lineCov","hits":"1","order":"437",},
{"lineNum":"  618","line":"    if [ \"$NAVE_CONFIG\" == \"\" ]; then","class":"lineCov","hits":"1","order":"443",},
{"lineNum":"  619","line":"      NAVE_CONFIG=()"},
{"lineNum":"  620","line":"    fi"},
{"lineNum":"  621","line":"    if ! ./configure \"${NAVE_CONFIG[@]}\"; then","class":"lineCov","hits":"1","order":"444",},
{"lineNum":"  622","line":"      err \"failed ./configure\"","class":"lineCov","hits":"1","order":"436",},
{"lineNum":"  623","line":"      return 1","class":"lineCov","hits":"1","order":"435",},
{"lineNum":"  624","line":"    else"},
{"lineNum":"  625","line":"      make test-all","class":"lineCov","hits":"1","order":"434",},
{"lineNum":"  626","line":"    fi"},
{"lineNum":"  627","line":"  )"},
{"lineNum":"  628","line":"}"},
{"lineNum":"  629","line":""},
{"lineNum":"  630","line":"nave_ls () {"},
{"lineNum":"  631","line":"  ls -- $NAVE_SRC | version_list \"src\" \\","class":"lineCov","hits":"1","order":"273",},
{"lineNum":"  632","line":"    && ls -- $NAVE_ROOT | version_list \"installed\" \\"},
{"lineNum":"  633","line":"    && nave_ls_named"},
{"lineNum":"  634","line":"}"},
{"lineNum":"  635","line":""},
{"lineNum":"  636","line":"nave_ls_remote () {"},
{"lineNum":"  637","line":"  get / | version_list \"node remote\"","class":"lineCov","hits":"1","order":"285",},
{"lineNum":"  638","line":"}"},
{"lineNum":"  639","line":""},
{"lineNum":"  640","line":"nave_ls_named () {"},
{"lineNum":"  641","line":"  echo \"named:\"","class":"lineCov","hits":"1","order":"272",},
{"lineNum":"  642","line":"  ls -- \"$NAVE_ROOT\" \\","class":"lineCov","hits":"1","order":"283",},
{"lineNum":"  643","line":"    | egrep -v \'[0-9]+\\.[0-9]+\\.[0-9]+\' \\"},
{"lineNum":"  644","line":"    | sort \\"},
{"lineNum":"  645","line":"    | while read name; do"},
{"lineNum":"  646","line":"      echo \"$name: $(ver $($NAVE_ROOT/$name/bin/node -v 2>/dev/null))\"","class":"lineCov","hits":"1","order":"279",},
{"lineNum":"  647","line":"    done"},
{"lineNum":"  648","line":"}"},
{"lineNum":"  649","line":""},
{"lineNum":"  650","line":"nave_ls_all () {"},
{"lineNum":"  651","line":"  nave_ls && (echo \"\"; nave_ls_remote)","class":"lineCov","hits":"1","order":"280",},
{"lineNum":"  652","line":"}"},
{"lineNum":"  653","line":""},
{"lineNum":"  654","line":"ver () {"},
{"lineNum":"  655","line":"  local version=\"$1\"","class":"lineCov","hits":"1","order":"63",},
{"lineNum":"  656","line":"  local nonames=\"$2\"","class":"lineCov","hits":"1","order":"67",},
{"lineNum":"  657","line":"  version=\"${version#v}\"","class":"lineCov","hits":"1","order":"102",},
{"lineNum":"  658","line":"  case $version in","class":"lineCov","hits":"1","order":"46",},
{"lineNum":"  659","line":"    lts-* | lts/*) nave_lts $version ;;","class":"lineCov","hits":"1","order":"249",},
{"lineNum":"  660","line":"    lts | latest | stable) nave_$version ;;","class":"lineCov","hits":"1","order":"254",},
{"lineNum":"  661","line":"    +([0-9])) nave_version_family \"$version\\.\"\'[0-9]+\' ;;","class":"lineCov","hits":"1","order":"154",},
{"lineNum":"  662","line":"    +([0-9]).) nave_version_family \"$version\"\'[0-9]+\' ;;","class":"lineCov","hits":"1","order":"248",},
{"lineNum":"  663","line":"    +([0-9]).+([0-9])) nave_version_family \"$version\" ;;","class":"lineCov","hits":"1","order":"251",},
{"lineNum":"  664","line":"    +([0-9]).+([0-9]).) nave_version_family \"$version\" ;;","class":"lineCov","hits":"1","order":"247",},
{"lineNum":"  665","line":"    +([0-9]).+([0-9]).+([0-9])) echo $version ;;","class":"lineCov","hits":"1","order":"17",},
{"lineNum":"  666","line":"    *) [ \"$nonames\" = \"\" ] && echo $version ;;","class":"lineCov","hits":"1","order":"16",},
{"lineNum":"  667","line":"  esac"},
{"lineNum":"  668","line":"}"},
{"lineNum":"  669","line":""},
{"lineNum":"  670","line":"nave_version_family () {"},
{"lineNum":"  671","line":"  local family=\"$1\"","class":"lineCov","hits":"1","order":"147",},
{"lineNum":"  672","line":"  family=\"${family#v}\"","class":"lineCov","hits":"1","order":"150",},
{"lineNum":"  673","line":"  family=\"${family%.}\"","class":"lineCov","hits":"1","order":"146",},
{"lineNum":"  674","line":"  get / | egrep -o \'v\'$family\'\\.[0-9]+\' | sed -e \'s|^v||g\' \\","class":"lineCov","hits":"1","order":"149",},
{"lineNum":"  675","line":"    | semver_sort | tail -n1"},
{"lineNum":"  676","line":"}"},
{"lineNum":"  677","line":""},
{"lineNum":"  678","line":"semver_sort () {"},
{"lineNum":"  679","line":"  sort -u -k 1,1n -k 2,2n -k 3,3n -t .","class":"lineCov","hits":"1","order":"148",},
{"lineNum":"  680","line":"}"},
{"lineNum":"  681","line":""},
{"lineNum":"  682","line":"nave_latest () {"},
{"lineNum":"  683","line":"  get / \\","class":"lineCov","hits":"1","order":"265",},
{"lineNum":"  684","line":"    | egrep -o \'[0-9]+\\.[0-9]+\\.[0-9]+\' \\"},
{"lineNum":"  685","line":"    | semver_sort \\"},
{"lineNum":"  686","line":"    | tail -n1"},
{"lineNum":"  687","line":"}"},
{"lineNum":"  688","line":""},
{"lineNum":"  689","line":"nave_stable () {"},
{"lineNum":"  690","line":"  nave_lts \"$@\"","class":"lineCov","hits":"1","order":"286",},
{"lineNum":"  691","line":"}"},
{"lineNum":"  692","line":""},
{"lineNum":"  693","line":"nave_lts () {"},
{"lineNum":"  694","line":"  # err \"nave_lts $@\""},
{"lineNum":"  695","line":"  local lts=\"$1\"","class":"lineCov","hits":"1","order":"252",},
{"lineNum":"  696","line":"  case $lts in","class":"lineCov","hits":"1","order":"246",},
{"lineNum":"  697","line":"    \"\" | \"lts/*\")"},
{"lineNum":"  698","line":"      lts=\"$(get / | egrep -o \'latest-[^v][^/]+\' | sort | uniq | tail -n1)\"","class":"lineCov","hits":"1","order":"245",},
{"lineNum":"  699","line":"      lts=${lts/latest-/}","class":"lineCov","hits":"1","order":"250",},
{"lineNum":"  700","line":"      ;;"},
{"lineNum":"  701","line":"    lts/*)"},
{"lineNum":"  702","line":"      lts=$(basename \"$lts\")","class":"lineCov","hits":"1","order":"244",},
{"lineNum":"  703","line":"      ;;"},
{"lineNum":"  704","line":"    latest-*)"},
{"lineNum":"  705","line":"      lts=${lts/latest-/}","class":"lineCov","hits":"1","order":"287",},
{"lineNum":"  706","line":"      # err \"nave_lts lts latest [$lts]\""},
{"lineNum":"  707","line":"      ;;"},
{"lineNum":"  708","line":"  esac"},
{"lineNum":"  709","line":"  # err \"nave_lts lts=[$lts]\""},
{"lineNum":"  710","line":""},
{"lineNum":"  711","line":"  get latest-$lts/ | egrep -o \'[0-9]+\\.[0-9]+\\.[0-9]+\' | head -n1","class":"lineCov","hits":"1","order":"253",},
{"lineNum":"  712","line":"}"},
{"lineNum":"  713","line":""},
{"lineNum":"  714","line":"version_list () {"},
{"lineNum":"  715","line":"  echo \"$1:\"","class":"lineCov","hits":"1","order":"278",},
{"lineNum":"  716","line":"  egrep -o \'[0-9]+\\.[0-9]+\\.[0-9]+\' \\","class":"lineCov","hits":"1","order":"277",},
{"lineNum":"  717","line":"    | semver_sort \\"},
{"lineNum":"  718","line":"    | organize_version_list"},
{"lineNum":"  719","line":"}"},
{"lineNum":"  720","line":""},
{"lineNum":"  721","line":"organize_version_list () {"},
{"lineNum":"  722","line":"  local i=0","class":"lineCov","hits":"1","order":"271",},
{"lineNum":"  723","line":"  local v","class":"lineCov","hits":"1","order":"270",},
{"lineNum":"  724","line":"  while read v; do","class":"lineCov","hits":"1","order":"281",},
{"lineNum":"  725","line":"    if [ $i -eq 8 ]; then","class":"lineCov","hits":"1","order":"275",},
{"lineNum":"  726","line":"      i=0","class":"lineCov","hits":"1","order":"276",},
{"lineNum":"  727","line":"      echo \"$v\"","class":"lineCov","hits":"1","order":"282",},
{"lineNum":"  728","line":"    else"},
{"lineNum":"  729","line":"      let \'i = i + 1\'","class":"lineCov","hits":"1","order":"269",},
{"lineNum":"  730","line":"      echo -ne \"$v\\t\"","class":"lineCov","hits":"1","order":"268",},
{"lineNum":"  731","line":"    fi"},
{"lineNum":"  732","line":"  done"},
{"lineNum":"  733","line":"  echo \"\"","class":"lineCov","hits":"1","order":"274",},
{"lineNum":"  734","line":"  [ $i -ne 0 ] && echo \"\"","class":"lineCov","hits":"1","order":"267",},
{"lineNum":"  735","line":"  return 0","class":"lineCov","hits":"1","order":"266",},
{"lineNum":"  736","line":"}"},
{"lineNum":"  737","line":""},
{"lineNum":"  738","line":"nave_has () {"},
{"lineNum":"  739","line":"  local version=$(ver \"$1\")","class":"lineCov","hits":"1","order":"194",},
{"lineNum":"  740","line":"  [ -x \"$NAVE_SRC/$version/configure\" ]","class":"lineCov","hits":"1","order":"167",},
{"lineNum":"  741","line":"}"},
{"lineNum":"  742","line":""},
{"lineNum":"  743","line":"nave_installed () {"},
{"lineNum":"  744","line":"  local version=$(ver \"$1\")","class":"lineCov","hits":"1","order":"33",},
{"lineNum":"  745","line":"  [ -x \"$NAVE_ROOT/$version/bin/node\" ]","class":"lineCov","hits":"1","order":"91",},
{"lineNum":"  746","line":"}"},
{"lineNum":"  747","line":""},
{"lineNum":"  748","line":"nave_use () {"},
{"lineNum":"  749","line":"  if [ -z \"$1\" ]; then","class":"lineCov","hits":"1","order":"455",},
{"lineNum":"  750","line":"    err \"Must supply a version\"","class":"lineCov","hits":"1","order":"454",},
{"lineNum":"  751","line":"    return 1","class":"lineCov","hits":"1","order":"467",},
{"lineNum":"  752","line":"  fi"},
{"lineNum":"  753","line":""},
{"lineNum":"  754","line":"  local version=$(ver \"$1\" NONAMES)","class":"lineCov","hits":"1","order":"453",},
{"lineNum":"  755","line":""},
{"lineNum":"  756","line":"  # if it\'s not a version number, then treat as a name."},
{"lineNum":"  757","line":"  if ! [[ \"$version\" =~ ^[0-9]+\\.[0-9]+\\.[0-9]+$ ]]; then","class":"lineCov","hits":"1","order":"460",},
{"lineNum":"  758","line":"    nave_named \"$@\"","class":"lineCov","hits":"1","order":"459",},
{"lineNum":"  759","line":"    return $?","class":"lineCov","hits":"1","order":"452",},
{"lineNum":"  760","line":"  fi"},
{"lineNum":"  761","line":""},
{"lineNum":"  762","line":"  if [ \"$version\" == \"$NAVENAME\" ]; then","class":"lineCov","hits":"1","order":"458",},
{"lineNum":"  763","line":"    # we\'re already here"},
{"lineNum":"  764","line":"    if [ $# -gt 1 ]; then","class":"lineCov","hits":"1","order":"468",},
{"lineNum":"  765","line":"      shift","class":"lineCov","hits":"1","order":"451",},
{"lineNum":"  766","line":"      if [ \"$1\" == \"exec\" ]; then","class":"lineCov","hits":"1","order":"450",},
{"lineNum":"  767","line":"        shift","class":"lineCov","hits":"1","order":"465",},
{"lineNum":"  768","line":"      fi"},
{"lineNum":"  769","line":"      exec \"$@\"","class":"lineCov","hits":"1","order":"466",},
{"lineNum":"  770","line":"    else"},
{"lineNum":"  771","line":"      return 0","class":"lineCov","hits":"1","order":"457",},
{"lineNum":"  772","line":"    fi"},
{"lineNum":"  773","line":"  fi"},
{"lineNum":"  774","line":""},
{"lineNum":"  775","line":"  nave_install \"$version\"","class":"lineCov","hits":"1","order":"456",},
{"lineNum":"  776","line":"  local ret=$?","class":"lineCov","hits":"1","order":"449",},
{"lineNum":"  777","line":"  if [ $ret -ne 0 ]; then","class":"lineCov","hits":"1","order":"448",},
{"lineNum":"  778","line":"    err \"failed to install $version\"","class":"lineCov","hits":"1","order":"447",},
{"lineNum":"  779","line":"    return $ret","class":"lineCov","hits":"1","order":"469",},
{"lineNum":"  780","line":"  fi"},
{"lineNum":"  781","line":"  local prefix=\"$NAVE_ROOT/$version\"","class":"lineCov","hits":"1","order":"462",},
{"lineNum":"  782","line":"  local lvl=$[ ${NAVELVL-0} + 1 ]","class":"lineCov","hits":"1","order":"463",},
{"lineNum":"  783","line":"  if [ $# -gt 1 ]; then","class":"lineCov","hits":"1","order":"464",},
{"lineNum":"  784","line":"    shift","class":"lineCov","hits":"1","order":"446",},
{"lineNum":"  785","line":"    nave_exec \"$lvl\" \"$version\" \"$version\" \"$prefix\" \"$@\"","class":"lineCov","hits":"1","order":"461",},
{"lineNum":"  786","line":"  else"},
{"lineNum":"  787","line":"    nave_login \"$lvl\" \"$version\" \"$version\" \"$prefix\"","class":"lineCov","hits":"1","order":"445",},
{"lineNum":"  788","line":"  fi"},
{"lineNum":"  789","line":"}"},
{"lineNum":"  790","line":""},
{"lineNum":"  791","line":"# internal"},
{"lineNum":"  792","line":"nave_exec () {"},
{"lineNum":"  793","line":"  nave_run \"exec\" \"$@\"","class":"lineCov","hits":"1","order":"408",},
{"lineNum":"  794","line":"}"},
{"lineNum":"  795","line":""},
{"lineNum":"  796","line":"nave_login () {"},
{"lineNum":"  797","line":"  nave_run \"login\" \"$@\"","class":"lineCov","hits":"1","order":"396",},
{"lineNum":"  798","line":"}"},
{"lineNum":"  799","line":""},
{"lineNum":"  800","line":"nave_run () {"},
{"lineNum":"  801","line":"  write_rcfile","class":"lineCov","hits":"1","order":"409",},
{"lineNum":"  802","line":"  local exec=\"$1\"","class":"lineCov","hits":"1","order":"410",},
{"lineNum":"  803","line":"  shift","class":"lineCov","hits":"1","order":"395",},
{"lineNum":"  804","line":"  local lvl=\"$1\"","class":"lineCov","hits":"1","order":"394",},
{"lineNum":"  805","line":"  shift","class":"lineCov","hits":"1","order":"411",},
{"lineNum":"  806","line":"  local name=\"$1\"","class":"lineCov","hits":"1","order":"412",},
{"lineNum":"  807","line":"  shift","class":"lineCov","hits":"1","order":"413",},
{"lineNum":"  808","line":"  local version=\"$1\"","class":"lineCov","hits":"1","order":"393",},
{"lineNum":"  809","line":"  shift","class":"lineCov","hits":"1","order":"414",},
{"lineNum":"  810","line":"  local prefix=\"$1\"","class":"lineCov","hits":"1","order":"415",},
{"lineNum":"  811","line":"  shift","class":"lineCov","hits":"1","order":"416",},
{"lineNum":"  812","line":"  #err \"nave_run exec=$exec lvl=$lvl name=$name version=$version prefix=$prefix\""},
{"lineNum":"  813","line":""},
{"lineNum":"  814","line":"  local bin=\"$prefix/bin\"","class":"lineCov","hits":"1","order":"417",},
{"lineNum":"  815","line":"  local lib=\"$prefix/lib/node\"","class":"lineCov","hits":"1","order":"392",},
{"lineNum":"  816","line":"  local man=\"$prefix/share/man\"","class":"lineCov","hits":"1","order":"391",},
{"lineNum":"  817","line":"  mkdirp \"$bin\"","class":"lineCov","hits":"1","order":"418",},
{"lineNum":"  818","line":"  mkdirp \"$lib\"","class":"lineCov","hits":"1","order":"390",},
{"lineNum":"  819","line":"  mkdirp \"$man\"","class":"lineCov","hits":"1","order":"419",},
{"lineNum":"  820","line":""},
{"lineNum":"  821","line":"  # now $@ is the command to run, or empty if it\'s not an exec."},
{"lineNum":"  822","line":"  local args=()","class":"lineCov","hits":"1","order":"420",},
{"lineNum":"  823","line":"  local isLogin","class":"lineCov","hits":"1","order":"421",},
{"lineNum":"  824","line":""},
{"lineNum":"  825","line":"  local runShell=$SHELL","class":"lineCov","hits":"1","order":"400",},
{"lineNum":"  826","line":"  if [ \"$exec\" == \"exec\" ]; then","class":"lineCov","hits":"1","order":"422",},
{"lineNum":"  827","line":"    isLogin=\"\"","class":"lineCov","hits":"1","order":"389",},
{"lineNum":"  828","line":"    # source the nave env file, then run the command."},
{"lineNum":"  829","line":"    args=(\"-c\" \". $(enquote_all $NAVE_DIR/.zshenv); $(enquote_all \"$@\")\")","class":"lineCov","hits":"1","order":"423",},
{"lineNum":"  830","line":"  else"},
{"lineNum":"  831","line":"    case \"$(basename $SHELL)\" in","class":"lineCov","hits":"1","order":"424",},
{"lineNum":"  832","line":"      zsh)"},
{"lineNum":"  833","line":"        isLogin=\"1\"","class":"lineCov","hits":"1","order":"432",},
{"lineNum":"  834","line":"        # no need to set rcfile, since ZDOTDIR is set."},
{"lineNum":"  835","line":"        args=()"},
{"lineNum":"  836","line":"        ;;"},
{"lineNum":"  837","line":"      bash)"},
{"lineNum":"  838","line":"        isLogin=\"1\"","class":"lineCov","hits":"1","order":"401",},
{"lineNum":"  839","line":"        # bash, use --rcfile argument"},
{"lineNum":"  840","line":"        args=(\"--rcfile\" \"$NAVE_DIR/.zshenv\")","class":"lineCov","hits":"1","order":"388",},
{"lineNum":"  841","line":"        ;;"},
{"lineNum":"  842","line":"      *)"},
{"lineNum":"  843","line":"        isLogin=\"1\"","class":"lineCov","hits":"1","order":"433",},
{"lineNum":"  844","line":"        # use bash so we can source the rcfile we\'ve prepared but then tell"},
{"lineNum":"  845","line":"        # bash to run the user\'s preferred shell"},
{"lineNum":"  846","line":"        runShell=\"bash\"","class":"lineCov","hits":"1","order":"430",},
{"lineNum":"  847","line":"        args=(\"-c\" \". $NAVE_DIR/.zshenv && $SHELL\")","class":"lineCov","hits":"1","order":"431",},
{"lineNum":"  848","line":"        ;;"},
{"lineNum":"  849","line":"    esac"},
{"lineNum":"  850","line":"  fi"},
{"lineNum":"  851","line":""},
{"lineNum":"  852","line":"  local nave=\"$version\"","class":"lineCov","hits":"1","order":"398",},
{"lineNum":"  853","line":"  if [ \"$version\" != \"$name\" ]; then","class":"lineCov","hits":"1","order":"387",},
{"lineNum":"  854","line":"    nave=\"$name\"-\"$version\"","class":"lineCov","hits":"1","order":"386",},
{"lineNum":"  855","line":"  fi"},
{"lineNum":"  856","line":""},
{"lineNum":"  857","line":"  # use exec to take over this shell process with whatever we\'re"},
{"lineNum":"  858","line":"  # executing, whether that\'s a login or a command.  otherwise there"},
{"lineNum":"  859","line":"  # are actually TWO subshells, rather than one."},
{"lineNum":"  860","line":""},
{"lineNum":"  861","line":"  NAVELVL=$lvl \\","class":"lineCov","hits":"1","order":"403",},
{"lineNum":"  862","line":"  NAVEPATH=\"$bin\" \\"},
{"lineNum":"  863","line":"  NAVEVERSION=\"$version\" \\"},
{"lineNum":"  864","line":"  NAVENAME=\"$name\" \\"},
{"lineNum":"  865","line":"  NAVE=\"$nave\" \\"},
{"lineNum":"  866","line":"  npm_config_binroot=\"$bin\"\\"},
{"lineNum":"  867","line":"  npm_config_root=\"$lib\" \\"},
{"lineNum":"  868","line":"  npm_config_manroot=\"$man\" \\"},
{"lineNum":"  869","line":"  npm_config_prefix=\"$prefix\" \\"},
{"lineNum":"  870","line":"  NODE_PATH=\"$lib\" \\"},
{"lineNum":"  871","line":"  NAVE_LOGIN=\"$isLogin\" \\"},
{"lineNum":"  872","line":"  NAVE_DIR=\"$NAVE_DIR\" \\"},
{"lineNum":"  873","line":"  ZDOTDIR=\"$NAVE_DIR\" \\"},
{"lineNum":"  874","line":"    exec \"$runShell\" \"${args[@]}\""},
{"lineNum":"  875","line":"}"},
{"lineNum":"  876","line":""},
{"lineNum":"  877","line":"nave_named () {"},
{"lineNum":"  878","line":"  local name=\"$1\"","class":"lineCov","hits":"1","order":"406",},
{"lineNum":"  879","line":"  shift","class":"lineCov","hits":"1","order":"425",},
{"lineNum":"  880","line":""},
{"lineNum":"  881","line":"  local version=$(ver \"$1\" NONAMES)","class":"lineCov","hits":"1","order":"385",},
{"lineNum":"  882","line":"  if [ \"$version\" != \"\" ]; then","class":"lineCov","hits":"1","order":"426",},
{"lineNum":"  883","line":"    shift","class":"lineCov","hits":"1","order":"427",},
{"lineNum":"  884","line":"  fi"},
{"lineNum":"  885","line":""},
{"lineNum":"  886","line":"  add_named_env \"$name\" \"$version\" || fail \"failed to create $name env\"","class":"lineCov","hits":"1","order":"384",},
{"lineNum":"  887","line":""},
{"lineNum":"  888","line":"  if [ \"$name\" == \"$NAVENAME\" ] && [ \"$version\" == \"$NAVEVERSION\" ]; then","class":"lineCov","hits":"1","order":"383",},
{"lineNum":"  889","line":"    if [ $# -gt 0 ]; then","class":"lineCov","hits":"1","order":"407",},
{"lineNum":"  890","line":"      if [ \"$1\" == \"exec\" ]; then","class":"lineCov","hits":"1","order":"382",},
{"lineNum":"  891","line":"        shift","class":"lineCov","hits":"1","order":"381",},
{"lineNum":"  892","line":"      fi"},
{"lineNum":"  893","line":"      exec \"$@\"","class":"lineCov","hits":"1","order":"380",},
{"lineNum":"  894","line":"    else"},
{"lineNum":"  895","line":"      return 0","class":"lineCov","hits":"1","order":"404",},
{"lineNum":"  896","line":"    fi"},
{"lineNum":"  897","line":"  fi"},
{"lineNum":"  898","line":""},
{"lineNum":"  899","line":"  if [ \"$version\" = \"\" ]; then","class":"lineCov","hits":"1","order":"405",},
{"lineNum":"  900","line":"    version=\"$(ver \"$(\"$NAVE_ROOT/$name/bin/node\" -v 2>/dev/null)\")\"","class":"lineCov","hits":"1","order":"402",},
{"lineNum":"  901","line":"  fi"},
{"lineNum":"  902","line":""},
{"lineNum":"  903","line":"  local prefix=\"$NAVE_ROOT/$name\"","class":"lineCov","hits":"1","order":"399",},
{"lineNum":"  904","line":""},
{"lineNum":"  905","line":"  local lvl=$[ ${NAVELVL-0} + 1 ]","class":"lineCov","hits":"1","order":"379",},
{"lineNum":"  906","line":"  # get the version"},
{"lineNum":"  907","line":"  if [ $# -gt 0 ]; then","class":"lineCov","hits":"1","order":"428",},
{"lineNum":"  908","line":"    nave_exec \"$lvl\" \"$name\" \"$version\" \"$prefix\" \"$@\"","class":"lineCov","hits":"1","order":"378",},
{"lineNum":"  909","line":"  else"},
{"lineNum":"  910","line":"    nave_login \"$lvl\" \"$name\" \"$version\" \"$prefix\"","class":"lineCov","hits":"1","order":"377",},
{"lineNum":"  911","line":"  fi"},
{"lineNum":"  912","line":"}"},
{"lineNum":"  913","line":""},
{"lineNum":"  914","line":"add_named_env () {"},
{"lineNum":"  915","line":"  local name=\"$1\"","class":"lineCov","hits":"1","order":"47",},
{"lineNum":"  916","line":"  local version=\"$2\"","class":"lineCov","hits":"1","order":"133",},
{"lineNum":"  917","line":"  local cur=\"$(ver \"$($NAVE_ROOT/$name/bin/node -v 2>/dev/null)\" \"NONAMES\")\"","class":"lineCov","hits":"1","order":"15",},
{"lineNum":"  918","line":""},
{"lineNum":"  919","line":"  if [ \"$name\" == \"\" ]; then","class":"lineCov","hits":"1","order":"134",},
{"lineNum":"  920","line":"    err \"Must provide a name\"","class":"lineCov","hits":"1","order":"45",},
{"lineNum":"  921","line":"    return 1","class":"lineCov","hits":"1","order":"14",},
{"lineNum":"  922","line":"  fi"},
{"lineNum":"  923","line":""},
{"lineNum":"  924","line":"  if [ \"$version\" != \"\" ]; then","class":"lineCov","hits":"1","order":"135",},
{"lineNum":"  925","line":"    version=\"$(ver \"$version\" \"NONAMES\")\"","class":"lineCov","hits":"1","order":"136",},
{"lineNum":"  926","line":"  else"},
{"lineNum":"  927","line":"    version=\"$cur\"","class":"lineCov","hits":"1","order":"137",},
{"lineNum":"  928","line":"  fi"},
{"lineNum":"  929","line":""},
{"lineNum":"  930","line":"  if [ \"$version\" = \"\" ]; then","class":"lineCov","hits":"1","order":"13",},
{"lineNum":"  931","line":"    echo \"What version of node?\"","class":"lineCov","hits":"1","order":"43",},
{"lineNum":"  932","line":"    read -p \"lts, lts/<name>, latest, x.y, or x.y.z > \" version","class":"lineCov","hits":"1","order":"138",},
{"lineNum":"  933","line":"    version=$(ver \"$version\" \"NONAMES\")","class":"lineCov","hits":"1","order":"139",},
{"lineNum":"  934","line":"    if [ \"$version\" = \"\" ]; then","class":"lineCov","hits":"1","order":"12",},
{"lineNum":"  935","line":"      err \"Invalid version specifier\"","class":"lineCov","hits":"1","order":"11",},
{"lineNum":"  936","line":"      return 1","class":"lineCov","hits":"1","order":"10",},
{"lineNum":"  937","line":"    fi"},
{"lineNum":"  938","line":"  fi"},
{"lineNum":"  939","line":""},
{"lineNum":"  940","line":"  # if that version is already there, then nothing to do."},
{"lineNum":"  941","line":"  if [ \"$cur\" = \"$version\" ]; then","class":"lineCov","hits":"1","order":"140",},
{"lineNum":"  942","line":"    return 0","class":"lineCov","hits":"1","order":"42",},
{"lineNum":"  943","line":"  fi"},
{"lineNum":"  944","line":""},
{"lineNum":"  945","line":"  err \"Creating new env named \'$name\' using node $version\"","class":"lineCov","hits":"1","order":"141",},
{"lineNum":"  946","line":""},
{"lineNum":"  947","line":"  nave_install \"$version\"","class":"lineCov","hits":"1","order":"9",},
{"lineNum":"  948","line":"  local ret=$?","class":"lineCov","hits":"1","order":"60",},
{"lineNum":"  949","line":"  if [ $ret -ne 0 ]; then","class":"lineCov","hits":"1","order":"8",},
{"lineNum":"  950","line":"    err \"failed to install $version\"","class":"lineCov","hits":"1","order":"7",},
{"lineNum":"  951","line":"    return $ret","class":"lineCov","hits":"1","order":"142",},
{"lineNum":"  952","line":"  fi"},
{"lineNum":"  953","line":""},
{"lineNum":"  954","line":"  mkdirp \"$NAVE_ROOT/$name/bin\"","class":"lineCov","hits":"1","order":"143",},
{"lineNum":"  955","line":"  mkdirp \"$NAVE_ROOT/$name/lib/node\"","class":"lineCov","hits":"1","order":"6",},
{"lineNum":"  956","line":"  mkdirp \"$NAVE_ROOT/$name/lib/node_modules\"","class":"lineCov","hits":"1","order":"5",},
{"lineNum":"  957","line":"  mkdirp \"$NAVE_ROOT/$name/share/man\"","class":"lineCov","hits":"1","order":"38",},
{"lineNum":"  958","line":""},
{"lineNum":"  959","line":"  ln -sf -- \"$NAVE_ROOT/$version/bin/node\" \"$NAVE_ROOT/$name/bin/node\"","class":"lineCov","hits":"1","order":"4",},
{"lineNum":"  960","line":"  ln -sf -- \"$NAVE_ROOT/$version/bin/npm\"  \"$NAVE_ROOT/$name/bin/npm\"","class":"lineCov","hits":"1","order":"3",},
{"lineNum":"  961","line":"  ln -sf -- \"$NAVE_ROOT/$version/bin/node-waf\" \"$NAVE_ROOT/$name/bin/node-waf\"","class":"lineCov","hits":"1","order":"2",},
{"lineNum":"  962","line":"  ln -sf -- \"$NAVE_ROOT/$version/bin/npx\"  \"$NAVE_ROOT/$name/bin/npx\"","class":"lineCov","hits":"1","order":"1",},
{"lineNum":"  963","line":"}"},
{"lineNum":"  964","line":""},
{"lineNum":"  965","line":"nave_clean () {"},
{"lineNum":"  966","line":"  rm -rf \"$NAVE_SRC/$(ver \"$1\")\" \"$NAVE_SRC/$(ver \"$1\")\".tgz \"$NAVE_SRC/$(ver \"$1\")\"-*.tgz","class":"lineCov","hits":"1","order":"230",},
{"lineNum":"  967","line":"}"},
{"lineNum":"  968","line":""},
{"lineNum":"  969","line":"nave_uninstall () {"},
{"lineNum":"  970","line":"  rimraf \"$NAVE_ROOT/$(ver \"$1\")\"","class":"lineCov","hits":"1","order":"170",},
{"lineNum":"  971","line":"}"},
{"lineNum":"  972","line":""},
{"lineNum":"  973","line":"nave_help () {"},
{"lineNum":"  974","line":"  [ -z $_TESTING_NAVE_NO_HELP ] && cat <<EOF","class":"lineCov","hits":"1","order":"324",},
{"lineNum":"  975","line":""},
{"lineNum":"  976","line":"Usage: nave <cmd>"},
{"lineNum":"  977","line":""},
{"lineNum":"  978","line":"Commands:"},
{"lineNum":"  979","line":""},
{"lineNum":"  980","line":"install <version>     Install the version specified (ex: 12.8.0)"},
{"lineNum":"  981","line":"install <name> <ver>  Install the version as a named env"},
{"lineNum":"  982","line":"use <version>         Enter a subshell where <version> is being used"},
{"lineNum":"  983","line":"use <ver> <program>   Enter a subshell, and run \"<program>\", then exit"},
{"lineNum":"  984","line":"use <name> <ver>      Create a named env, using the specified version."},
{"lineNum":"  985","line":"                      If the name already exists, but the version differs,"},
{"lineNum":"  986","line":"                      then it will update the link."},
{"lineNum":"  987","line":"usemain <version>     Install in /usr/local/bin (ie, use as your main nodejs)"},
{"lineNum":"  988","line":"clean <version>       Delete the source code for <version>"},
{"lineNum":"  989","line":"uninstall <version>   Delete the install for <version>"},
{"lineNum":"  990","line":"ls                    List versions currently installed"},
{"lineNum":"  991","line":"ls-remote             List remote node versions"},
{"lineNum":"  992","line":"ls-all                List remote and local node versions"},
{"lineNum":"  993","line":"latest                Show the most recent dist version"},
{"lineNum":"  994","line":"cache                 Clear or view the cache"},
{"lineNum":"  995","line":"help                  Output help information"},
{"lineNum":"  996","line":"auto                  Find a .naverc and then be in that env"},
{"lineNum":"  997","line":"auto <dir>            cd into <dir>, then find a .naverc, and be in that env"},
{"lineNum":"  998","line":"auto <dir> <cmd>      cd into <dir>, then find a .naverc, and run a command"},
{"lineNum":"  999","line":"                      in that env"},
{"lineNum":" 1000","line":"get <variable>        Print out various nave config values."},
{"lineNum":" 1001","line":"exit                  Unset all the NAVE environs (use with \'exec\')"},
{"lineNum":" 1002","line":""},
{"lineNum":" 1003","line":"Version Strings:"},
{"lineNum":" 1004","line":"Any command that calls for a version can be provided any of the"},
{"lineNum":" 1005","line":"following \"version-ish\" identifies:"},
{"lineNum":" 1006","line":""},
{"lineNum":" 1007","line":"- x.y.z       A specific SemVer tuple"},
{"lineNum":" 1008","line":"- x.y         Major and minor version number"},
{"lineNum":" 1009","line":"- x           Just a major version number"},
{"lineNum":" 1010","line":"- lts         The most recent LTS (long-term support) node version"},
{"lineNum":" 1011","line":"- lts/<name>  The latest in a named LTS set. (argon, boron, etc.)"},
{"lineNum":" 1012","line":"- lts/*       Same as just \"lts\""},
{"lineNum":" 1013","line":"- latest      The most recent (non-LTS) version"},
{"lineNum":" 1014","line":"- stable      Backwards-compatible alias for \"lts\"."},
{"lineNum":" 1015","line":""},
{"lineNum":" 1016","line":"To exit a nave subshell, type \'exit\' or press ^D."},
{"lineNum":" 1017","line":"To run nave *without* a subshell, do \'exec nave use <version>\'."},
{"lineNum":" 1018","line":"To clear the settings from a nave env, use \'exec nave exit\'"},
{"lineNum":" 1019","line":""},
{"lineNum":" 1020","line":"EOF"},
{"lineNum":" 1021","line":"}"},
{"lineNum":" 1022","line":""},
{"lineNum":" 1023","line":"if [ -z $_TESTING_NAVE_NO_MAIN ]; then","class":"lineCov","hits":"1","order":"145",},
{"lineNum":" 1024","line":"  main \"$@\"","class":"lineCov","hits":"1","order":"226",},
{"lineNum":" 1025","line":"else"},
{"lineNum":" 1026","line":"  get_nave_dir","class":"lineCov","hits":"1","order":"86",},
{"lineNum":" 1027","line":"fi"},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "", "date" : "2022-03-21 18:15:30", "instrumented" : 491, "covered" : 491,};
var merged_data = [];
